(()=>{"use strict";function e(e){let t=!1;const r=[];for(let n=0;n<e.length;n++){let s=e.charAt(n);"_"==s?t=!0:/\d/.test(s)?(r.push(s),t=!0):t?(r.push(s.toUpperCase()),t=!1):0==n?r.push(s.toLowerCase()):r.push(s)}return r.join("")}var t,r,n;function s(t){var r,s,i,a;return t.localName=null!==(r=t.localName)&&void 0!==r?r:e(t.name),t.jsonName=null!==(s=t.jsonName)&&void 0!==s?s:e(t.name),t.repeat=null!==(i=t.repeat)&&void 0!==i?i:n.NO,t.opt=null!==(a=t.opt)&&void 0!==a?a:!t.repeat&&!t.oneof&&"message"==t.kind,t}function i(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(t||(t={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(r||(r={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(n||(n={}));class a{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],r=[];for(let n of this.fields)if(n.oneof)r.includes(n.oneof)||(r.push(n.oneof),e.push(n.oneof),t.push(n.oneof));else switch(t.push(n.localName),n.kind){case"scalar":case"enum":n.opt&&!n.repeat||e.push(n.localName);break;case"message":n.repeat&&e.push(n.localName);break;case"map":e.push(n.localName)}this.data={req:e,known:t,oneofs:Object.values(r)}}is(e,t,r=!1){if(t<0)return!0;if(null==e||"object"!=typeof e)return!1;this.prepare();let n=Object.keys(e),s=this.data;if(n.length<s.req.length||s.req.some((e=>!n.includes(e))))return!1;if(!r&&n.some((e=>!s.known.includes(e))))return!1;if(t<1)return!0;for(const n of s.oneofs){const s=e[n];if(!i(s))return!1;if(void 0===s.oneofKind)continue;const a=this.fields.find((e=>e.localName===s.oneofKind));if(!a)return!1;if(!this.field(s[s.oneofKind],a,r,t))return!1}for(const n of this.fields)if(void 0===n.oneof&&!this.field(e[n.localName],n,r,t))return!1;return!0}field(e,r,n,s){let i=r.repeat;switch(r.kind){case"scalar":return void 0===e?r.opt:i?this.scalars(e,r.T,s,r.L):this.scalar(e,r.T,r.L);case"enum":return void 0===e?r.opt:i?this.scalars(e,t.INT32,s):this.scalar(e,t.INT32);case"message":return void 0===e||(i?this.messages(e,r.T(),n,s):this.message(e,r.T(),n,s));case"map":if("object"!=typeof e||null===e)return!1;if(s<2)return!0;if(!this.mapKeys(e,r.K,s))return!1;switch(r.V.kind){case"scalar":return this.scalars(Object.values(e),r.V.T,s,r.V.L);case"enum":return this.scalars(Object.values(e),t.INT32,s);case"message":return this.messages(Object.values(e),r.V.T(),n,s)}}return!0}message(e,t,r,n){return r?t.isAssignable(e,n):t.is(e,n)}messages(e,t,r,n){if(!Array.isArray(e))return!1;if(n<2)return!0;if(r){for(let r=0;r<e.length&&r<n;r++)if(!t.isAssignable(e[r],n-1))return!1}else for(let r=0;r<e.length&&r<n;r++)if(!t.is(e[r],n-1))return!1;return!0}scalar(e,n,s){let i=typeof e;switch(n){case t.UINT64:case t.FIXED64:case t.INT64:case t.SFIXED64:case t.SINT64:switch(s){case r.BIGINT:return"bigint"==i;case r.NUMBER:return"number"==i&&!isNaN(e);default:return"string"==i}case t.BOOL:return"boolean"==i;case t.STRING:return"string"==i;case t.BYTES:return e instanceof Uint8Array;case t.DOUBLE:case t.FLOAT:return"number"==i&&!isNaN(e);default:return"number"==i&&Number.isInteger(e)}}scalars(e,t,r,n){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e))for(let s=0;s<e.length&&s<r;s++)if(!this.scalar(e[s],t,n))return!1;return!0}mapKeys(e,n,s){let i=Object.keys(e);switch(n){case t.INT32:case t.FIXED32:case t.SFIXED32:case t.SINT32:case t.UINT32:return this.scalars(i.slice(0,s).map((e=>parseInt(e))),n,s);case t.BOOL:return this.scalars(i.slice(0,s).map((e=>"true"==e||"false"!=e&&e)),n,s);default:return this.scalars(i,n,s,r.STRING)}}}function o(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}let l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),u=[];for(let e=0;e<l.length;e++)u[l[e].charCodeAt(0)]=e;function f(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let r=this.buf[this.pos++];if(e|=(15&r)<<28,t=(112&r)>>4,0==(128&r))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function c(e,t,r){for(let n=0;n<28;n+=7){const s=e>>>n,i=!(s>>>7==0&&0==t),a=255&(i?128|s:s);if(r.push(a),!i)return}const n=e>>>28&15|(7&t)<<4,s=!(t>>3==0);if(r.push(255&(s?128|n:n)),s){for(let e=3;e<31;e+=7){const n=t>>>e,s=!(n>>>7==0),i=255&(s?128|n:n);if(r.push(i),!s)return}r.push(t>>>31&1)}}u["-".charCodeAt(0)]=l.indexOf("+"),u["_".charCodeAt(0)]=l.indexOf("/");const h=4294967296;function m(e){let t="-"==e[0];t&&(e=e.slice(1));const r=1e6;let n=0,s=0;function i(t,i){const a=Number(e.slice(t,i));s*=r,n=n*r+a,n>=h&&(s+=n/h|0,n%=h)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),[t,n,s]}function d(e,t){if(t<=2097151)return""+(h*t+e);let r=(e>>>24|t<<8)>>>0&16777215,n=t>>16&65535,s=(16777215&e)+6777216*r+6710656*n,i=r+8147497*n,a=2*n,o=1e7;function l(e,t){let r=e?String(e):"";return t?"0000000".slice(r.length)+r:r}return s>=o&&(i+=Math.floor(s/o),s%=o),i>=o&&(a+=Math.floor(i/o),i%=o),l(a,0)+l(i,a)+l(s,1)}function p(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let r=0;r<9;r++)t.push(127&e|128),e>>=7;t.push(1)}}function g(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}const b=function(){const e=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();function w(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const N=/^-?[0-9]+$/,y=4294967296;class I{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*y+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class T extends I{static from(e){if(b)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=b.C(e);case"number":if(0===e)return this.ZERO;e=b.C(e);case"bigint":if(!e)return this.ZERO;if(e<b.UMIN)throw new Error("signed value for ulong");if(e>b.UMAX)throw new Error("ulong too large");return b.V.setBigUint64(0,e,!0),new T(b.V.getInt32(0,!0),b.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!N.test(e))throw new Error("string is no integer");let[t,r,n]=m(e);if(t)throw new Error("signed value");return new T(r,n);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new T(e,e/y)}throw new Error("unknown value "+typeof e)}toString(){return b?this.toBigInt().toString():d(this.lo,this.hi)}toBigInt(){return w(b),b.V.setInt32(0,this.lo,!0),b.V.setInt32(4,this.hi,!0),b.V.getBigUint64(0,!0)}}T.ZERO=new T(0,0);class k extends I{static from(e){if(b)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=b.C(e);case"number":if(0===e)return this.ZERO;e=b.C(e);case"bigint":if(!e)return this.ZERO;if(e<b.MIN)throw new Error("ulong too small");if(e>b.MAX)throw new Error("ulong too large");return b.V.setBigInt64(0,e,!0),new k(b.V.getInt32(0,!0),b.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!N.test(e))throw new Error("string is no integer");let[t,r,n]=m(e),s=new k(r,n);return t?s.negate():s;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new k(e,e/y):new k(-e,-e/y).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new k(t,e)}toString(){if(b)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+d(e.lo,e.hi)}return d(this.lo,this.hi)}toBigInt(){return w(b),b.V.setInt32(0,this.lo,!0),b.V.setInt32(4,this.hi,!0),b.V.getBigInt64(0,!0)}}function E(e,t){if(!e)throw new Error(t)}function v(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function O(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function B(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}function S(e,t){switch(t){case r.BIGINT:return e.toBigInt();case r.NUMBER:return e.toNumber();default:return e.toString()}}k.ZERO=new k(0,0);class A{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,r){if(!e){let e=o(r);throw"number"!=e&&"boolean"!=e||(e=r.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,n,s){this.prepare();const i=[];for(const[o,l]of Object.entries(e)){const e=this.fMap[o];if(!e){if(!s.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${o}`);continue}const u=e.localName;let f;if(e.oneof){if(i.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(e.oneof),f=n[e.oneof]={oneofKind:u}}else f=n;if("map"==e.kind){if(null===l)continue;this.assert(null!==(a=l)&&"object"==typeof a&&!Array.isArray(a),e.name,l);const n=f[u];for(const[i,a]of Object.entries(l)){let o;switch(this.assert(null!==a,e.name+" map value",null),e.V.kind){case"message":o=e.V.T().internalJsonRead(a,s);break;case"enum":o=this.enum(e.V.T(),a,e.name);break;case"scalar":o=this.scalar(a,e.V.T,e.V.L,e.name)}this.assert(void 0!==o,e.name+" map value",a);let l=i;e.K==t.BOOL&&(l="true"==l||"false"!=l&&l),l=this.scalar(l,e.K,r.STRING,e.name).toString(),n[l]=o}}else if(e.repeat){if(null===l)continue;this.assert(Array.isArray(l),e.name,l);const t=f[u];for(const r of l){let n;switch(this.assert(null!==r,e.name,null),e.kind){case"message":n=e.T().internalJsonRead(r,s);break;case"enum":n=this.enum(e.T(),r,e.name);break;case"scalar":n=this.scalar(r,e.T,e.L,e.name)}this.assert(void 0!==n,e.name,l),t.push(n)}}else switch(e.kind){case"message":if(null===l&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}f[u]=e.T().internalJsonRead(l,s,f[u]);break;case"enum":f[u]=this.enum(e.T(),l,e.name);break;case"scalar":f[u]=this.scalar(l,e.T,e.L,e.name)}}var a}enum(e,t,r){if("google.protobuf.NullValue"==e[0]&&E(null===t,`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return E(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${t}.`),t;case"string":let n=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(n=t.substring(e[2].length));let s=e[1][n];return E("number"==typeof s,`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${t}".`),s}E(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof t}".`)}scalar(e,r,n,s){let i;try{switch(r){case t.DOUBLE:case t.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let s=Number(e);if(Number.isNaN(s)){i="not a number";break}if(!Number.isFinite(s)){i="too large or small";break}return r==t.FLOAT&&B(s),s;case t.INT32:case t.FIXED32:case t.SFIXED32:case t.SINT32:case t.UINT32:if(null===e)return 0;let a;if("number"==typeof e?a=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":a=Number(e)),void 0===a)break;return r==t.UINT32?O(a):v(a),a;case t.INT64:case t.SFIXED64:case t.SINT64:if(null===e)return S(k.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return S(k.from(e),n);case t.FIXED64:case t.UINT64:if(null===e)return S(T.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return S(T.from(e),n);case t.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case t.STRING:if(null===e)return"";if("string"!=typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(i){i="invalid UTF8";break}return e;case t.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let r,n=new Uint8Array(t),s=0,i=0,a=0;for(let t=0;t<e.length;t++){if(r=u[e.charCodeAt(t)],void 0===r)switch(e[t]){case"=":i=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:a=r,i=1;break;case 1:n[s++]=a<<2|(48&r)>>4,a=r,i=2;break;case 2:n[s++]=(15&a)<<4|(60&r)>>2,a=r,i=3;break;case 3:n[s++]=(3&a)<<6|r,i=0}}if(1==i)throw Error("invalid base64 string.");return n.subarray(0,s)}(e)}}catch(e){i=e.message}this.assert(!1,s+(i?" - "+i:""),e)}}class D{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const r={},n=e;for(const e of this.fields.filter((e=>!e.oneof))){let s=this.field(e,n[e.localName],t);void 0!==s&&(r[t.useProtoFieldName?e.name:e.jsonName]=s)}for(const e of this.fields){if(!e.oneof)continue;const s=n[e.oneof];if(s.oneofKind!==e.localName)continue;let i;i="scalar"==e.kind||"enum"==e.kind?this.field(e,s[e.localName],{enumAsInteger:t.enumAsInteger,useProtoFieldName:t.useProtoFieldName,emitDefaultValues:!0}):this.field(e,s[e.localName],t),E(void 0!==i),r[t.useProtoFieldName?e.name:e.jsonName]=i}return r}field(e,t,r){let n;if("map"==e.kind){E("object"==typeof t&&null!==t);const s={};switch(e.V.kind){case"scalar":for(const[r,n]of Object.entries(t)){const t=this.scalar(e.V.T,n,e.name,!1,!0);E(void 0!==t),s[r.toString()]=t}break;case"message":const n=e.V.T();for(const[i,a]of Object.entries(t)){const t=this.message(n,a,e.name,r);E(void 0!==t),s[i.toString()]=t}break;case"enum":const i=e.V.T();for(const[n,a]of Object.entries(t)){E(void 0===a||"number"==typeof a);const t=this.enum(i,a,e.name,!1,!0,r.enumAsInteger);E(void 0!==t),s[n.toString()]=t}}(r.emitDefaultValues||Object.keys(s).length>0)&&(n=s)}else if(e.repeat){E(Array.isArray(t));const s=[];switch(e.kind){case"scalar":for(let r=0;r<t.length;r++){const n=this.scalar(e.T,t[r],e.name,e.opt,!0);E(void 0!==n),s.push(n)}break;case"enum":const n=e.T();for(let i=0;i<t.length;i++){E(void 0===t[i]||"number"==typeof t[i]);const a=this.enum(n,t[i],e.name,e.opt,!0,r.enumAsInteger);E(void 0!==a),s.push(a)}break;case"message":const i=e.T();for(let n=0;n<t.length;n++){const a=this.message(i,t[n],e.name,r);E(void 0!==a),s.push(a)}}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(n=s)}else switch(e.kind){case"scalar":n=this.scalar(e.T,t,e.name,e.opt,r.emitDefaultValues);break;case"enum":n=this.enum(e.T(),t,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":n=this.message(e.T(),t,e.name,r)}return n}enum(e,t,r,n,s,i){if("google.protobuf.NullValue"==e[0])return null;if(void 0!==t){if(0!==t||s||n)return E("number"==typeof t),E(Number.isInteger(t)),i||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else E(n)}message(e,t,r,n){return void 0===t?n.emitDefaultValues?null:void 0:e.internalJsonWrite(t,n)}scalar(e,r,n,s,i){if(void 0===r)return void E(s);const a=i||s;switch(e){case t.INT32:case t.SFIXED32:case t.SINT32:return 0===r?a?0:void 0:(v(r),r);case t.FIXED32:case t.UINT32:return 0===r?a?0:void 0:(O(r),r);case t.FLOAT:B(r);case t.DOUBLE:return 0===r?a?0:void 0:(E("number"==typeof r),Number.isNaN(r)?"NaN":r===Number.POSITIVE_INFINITY?"Infinity":r===Number.NEGATIVE_INFINITY?"-Infinity":r);case t.STRING:return""===r?a?"":void 0:(E("string"==typeof r),r);case t.BOOL:return!1===r?!a&&void 0:(E("boolean"==typeof r),r);case t.UINT64:case t.FIXED64:E("number"==typeof r||"string"==typeof r||"bigint"==typeof r);let e=T.from(r);if(e.isZero()&&!a)return;return e.toString();case t.INT64:case t.SFIXED64:case t.SINT64:E("number"==typeof r||"string"==typeof r||"bigint"==typeof r);let n=k.from(r);if(n.isZero()&&!a)return;return n.toString();case t.BYTES:return E(r instanceof Uint8Array),r.byteLength?function(e){let t,r="",n=0,s=0;for(let i=0;i<e.length;i++)switch(t=e[i],n){case 0:r+=l[t>>2],s=(3&t)<<4,n=1;break;case 1:r+=l[s|t>>4],s=(15&t)<<2,n=2;break;case 2:r+=l[s|t>>6],r+=l[63&t],n=0}return n&&(r+=l[s],r+="=",1==n&&(r+="=")),r}(r):a?"":void 0}}}const F=e=>String.fromCharCode.apply(String,e);class U{constructor(e){this.varint64=f,this.uint32=g,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,r=7&e;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e){let t=this.pos;switch(e){case X.Varint:for(;128&this.buf[this.pos++];);break;case X.Bit64:this.pos+=4;case X.Bit32:this.pos+=4;break;case X.LengthDelimited:let t=this.uint32();this.pos+=t;break;case X.StartGroup:let r;for(;(r=this.tag()[1])!==X.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.slice(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new k(...this.varint64())}uint64(){return new T(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(1&e);return e=(e>>>1|(1&t)<<31)^r,t=t>>>1^r,new k(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new T(this.sfixed32(),this.sfixed32())}sfixed64(){return new k(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.slice(t,this.pos)}string(){return function(e){if(e.length<1)return"";let t,r=0,n=[],s=[],i=0,a=e.length;for(;r<a;)t=e[r++],t<128?s[i++]=t:t>191&&t<224?s[i++]=(31&t)<<6|63&e[r++]:t>239&&t<365?(t=((7&t)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,s[i++]=55296+(t>>10),s[i++]=56320+(1023&t)):s[i++]=(15&t)<<12|(63&e[r++])<<6|63&e[r++],i>8191&&(n.push(F(s)),i=0);return n.length?(i&&n.push(F(s.slice(0,i))),n.join("")):F(s.slice(0,i))}(this.bytes())}}class V{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),r=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],r),r+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(O(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return v(e),p(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){B(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){O(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){v(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return v(e),p(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=k.from(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=T.from(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}int64(e){let t=k.from(e);return c(t.lo,t.hi,this.buf),this}sint64(e){let t=k.from(e),r=t.hi>>31;return c(t.lo<<1^r,(t.hi<<1|t.lo>>>31)^r,this.buf),this}uint64(e){let t=T.from(e);return c(t.lo,t.hi,this.buf),this}}var L;!function(e){e.symbol=Symbol("protobuf-ts/unknown"),e.onRead=(r,n,s,i,a)=>{(t(n)?n[e.symbol]:n[e.symbol]=[]).push({no:s,wireType:i,data:a})},e.onWrite=(t,r,n)=>{for(let{no:t,wireType:s,data:i}of e.list(r))n.tag(t,s).raw(i)},e.list=(r,n)=>{if(t(r)){let t=r[e.symbol];return n?t.filter((e=>e.no==n)):t}return[]},e.last=(t,r)=>e.list(t,r).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(L||(L={}));const R={readUnknownField:!0,readerFactory:e=>new U(e)},j={writeUnknownFields:!0,writerFactory:()=>new V};var X;function x(e,n=r.STRING){switch(e){case t.BOOL:return!1;case t.UINT64:case t.FIXED64:return S(T.ZERO,n);case t.INT64:case t.SFIXED64:case t.SINT64:return S(k.ZERO,n);case t.DOUBLE:case t.FLOAT:return 0;case t.BYTES:return new Uint8Array(0);case t.STRING:return"";default:return 0}}!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(X||(X={}));class K{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,r,n,s){this.prepare();const i=void 0===s?e.len:e.pos+s;for(;e.pos<i;){const[s,i]=e.tag(),a=this.fieldNoToField.get(s);if(!a){let t=n.readUnknownField;if("throw"==t)throw new Error(`Unknown field ${s} (wire type ${i}) for ${this.info.typeName}`);let a=e.skip(i);!1!==t&&(!0===t?L.onRead:t)(this.info.typeName,r,s,i,a);continue}let o=r,l=a.repeat,u=a.localName;switch(a.oneof&&(o=o[a.oneof],o.oneofKind!==u&&(o=r[a.oneof]={oneofKind:u})),a.kind){case"scalar":case"enum":let r="enum"==a.kind?t.INT32:a.T,s="scalar"==a.kind?a.L:void 0;if(l){let n=o[u];if(i==X.LengthDelimited&&r!=t.STRING&&r!=t.BYTES){let t=e.uint32()+e.pos;for(;e.pos<t;)n.push(this.scalar(e,r,s))}else n.push(this.scalar(e,r,s))}else o[u]=this.scalar(e,r,s);break;case"message":if(l){let t=o[u],r=a.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else o[u]=a.T().internalBinaryRead(e,e.uint32(),n,o[u]);break;case"map":let[f,c]=this.mapEntry(a,e,n);o[u][f]=c}}}mapEntry(e,n,s){let i,a,o=n.uint32(),l=n.pos+o;for(;n.pos<l;){let[o,l]=n.tag();switch(o){case 1:i=e.K==t.BOOL?n.bool().toString():this.scalar(n,e.K,r.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(n,e.V.T,e.V.L);break;case"enum":a=n.int32();break;case"message":a=e.V.T().internalBinaryRead(n,n.uint32(),s)}break;default:throw new Error(`Unknown field ${o} (wire type ${l}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===i){let r=x(e.K);i=e.K==t.BOOL?r.toString():r}if(void 0===a)switch(e.V.kind){case"scalar":a=x(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create()}return[i,a]}scalar(e,r,n){switch(r){case t.INT32:return e.int32();case t.STRING:return e.string();case t.BOOL:return e.bool();case t.DOUBLE:return e.double();case t.FLOAT:return e.float();case t.INT64:return S(e.int64(),n);case t.UINT64:return S(e.uint64(),n);case t.FIXED64:return S(e.fixed64(),n);case t.FIXED32:return e.fixed32();case t.BYTES:return e.bytes();case t.UINT32:return e.uint32();case t.SFIXED32:return e.sfixed32();case t.SFIXED64:return S(e.sfixed64(),n);case t.SINT32:return e.sint32();case t.SINT64:return S(e.sint64(),n)}}}class ${constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,r,s){this.prepare();for(const i of this.fields){let a,o,l=i.repeat,u=i.localName;if(i.oneof){const t=e[i.oneof];if(t.oneofKind!==u)continue;a=t[u],o=!0}else a=e[u],o=!1;switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?t.INT32:i.T;if(l)if(E(Array.isArray(a)),l==n.PACKED)this.packed(r,e,i.no,a);else for(const t of a)this.scalar(r,e,i.no,t,!0);else void 0===a?E(i.opt):this.scalar(r,e,i.no,a,o||i.opt);break;case"message":if(l){E(Array.isArray(a));for(const e of a)this.message(r,s,i.T(),i.no,e)}else this.message(r,s,i.T(),i.no,a);break;case"map":E("object"==typeof a&&null!==a);for(const[e,t]of Object.entries(a))this.mapEntry(r,s,i,e,t)}}let i=s.writeUnknownFields;!1!==i&&(!0===i?L.onWrite:i)(this.info.typeName,e,r)}mapEntry(e,r,n,s,i){e.tag(n.no,X.LengthDelimited),e.fork();let a=s;switch(n.K){case t.INT32:case t.FIXED32:case t.UINT32:case t.SFIXED32:case t.SINT32:a=Number.parseInt(s);break;case t.BOOL:E("true"==s||"false"==s),a="true"==s}switch(this.scalar(e,n.K,1,a,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,i,!0);break;case"enum":this.scalar(e,t.INT32,2,i,!0);break;case"message":this.message(e,r,n.V.T(),2,i)}e.join()}message(e,t,r,n,s){void 0!==s&&(r.internalBinaryWrite(s,e.tag(n,X.LengthDelimited).fork(),t),e.join())}scalar(e,t,r,n,s){let[i,a,o]=this.scalarInfo(t,n);o&&!s||(e.tag(r,i),e[a](n))}packed(e,r,n,s){if(!s.length)return;E(r!==t.BYTES&&r!==t.STRING),e.tag(n,X.LengthDelimited),e.fork();let[,i]=this.scalarInfo(r);for(let t=0;t<s.length;t++)e[i](s[t]);e.join()}scalarInfo(e,r){let n,s=X.Varint,i=void 0===r,a=0===r;switch(e){case t.INT32:n="int32";break;case t.STRING:a=i||!r.length,s=X.LengthDelimited,n="string";break;case t.BOOL:a=!1===r,n="bool";break;case t.UINT32:n="uint32";break;case t.DOUBLE:s=X.Bit64,n="double";break;case t.FLOAT:s=X.Bit32,n="float";break;case t.INT64:a=i||k.from(r).isZero(),n="int64";break;case t.UINT64:a=i||T.from(r).isZero(),n="uint64";break;case t.FIXED64:a=i||T.from(r).isZero(),s=X.Bit64,n="fixed64";break;case t.BYTES:a=i||!r.byteLength,s=X.LengthDelimited,n="bytes";break;case t.FIXED32:s=X.Bit32,n="fixed32";break;case t.SFIXED32:s=X.Bit32,n="sfixed32";break;case t.SFIXED64:a=i||k.from(r).isZero(),s=X.Bit64,n="sfixed64";break;case t.SINT32:n="sint32";break;case t.SINT64:a=i||k.from(r).isZero(),n="sint64"}return[s,n,i||a]}}const G=Symbol("protobuf-ts/message-type");function J(e,t,r){let n,s,i=r;for(let r of e.fields){let e=r.localName;if(r.oneof){const a=i[r.oneof];if(void 0===a)continue;if(n=a[e],s=t[r.oneof],s.oneofKind=a.oneofKind,void 0===n){delete s[e];continue}}else if(n=i[e],s=t,void 0===n)continue;switch(r.kind){case"scalar":case"enum":r.repeat?s[e]=n.concat():s[e]=n;break;case"message":let t=r.T();if(r.repeat)for(let r=0;r<n.length;r++)s[e][r]=t.create(n[r]);else void 0===s[e]?s[e]=t.create(n):t.mergePartial(s[e],n);break;case"map":switch(r.V.kind){case"scalar":case"enum":Object.assign(s[e],n);break;case"message":let t=r.V.T();for(let r of Object.keys(n))s[e][r]=t.create(n[r])}}}}const C={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Z={ignoreUnknownFields:!1},M=Object.values;function P(e,r,n){if(r===n)return!0;if(e!==t.BYTES)return!1;let s=r,i=n;if(s.length!==i.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!=i[e])return!1;return!0}function Y(e,t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!P(e,t[n],r[n]))return!1;return!0}function W(e,t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e.equals(t[n],r[n]))return!1;return!0}const q=new class extends class{constructor(e,t,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(s),this.options=null!=r?r:{},this.refTypeCheck=new a(this),this.refJsonReader=new A(this),this.refJsonWriter=new D(this),this.refBinReader=new K(this),this.refBinWriter=new $(this)}create(e){let t=function(e){let t={[G]:e};for(let r of e.fields){let e=r.localName;if(!r.opt)if(r.oneof)t[r.oneof]={oneofKind:void 0};else if(r.repeat)t[e]=[];else switch(r.kind){case"scalar":t[e]=x(r.T,r.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&J(this,t,e),t}clone(e){let t=this.create();return J(this,t,e),t}equals(e,r){return function(e,r,n){if(r===n)return!0;if(!r||!n)return!1;for(let s of e.fields){let e=s.localName,i=s.oneof?r[s.oneof][e]:r[e],a=s.oneof?n[s.oneof][e]:n[e];switch(s.kind){case"enum":case"scalar":let e="enum"==s.kind?t.INT32:s.T;if(!(s.repeat?Y(e,i,a):P(e,i,a)))return!1;break;case"map":if(!("message"==s.V.kind?W(s.V.T(),M(i),M(a)):Y("enum"==s.V.kind?t.INT32:s.V.T,M(i),M(a))))return!1;break;case"message":let r=s.T();if(!(s.repeat?W(r,i,a):r.equals(i,a)))return!1}}return!0}(this,e,r)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){J(this,e,t)}fromBinary(e,t){let r=function(e){return e?Object.assign(Object.assign({},R),e):R}(t);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},Z),e):Z}(t))}fromJsonString(e,t){let r=JSON.parse(e);return this.fromJson(r,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},C),e):C}(t))}toJsonString(e,t){var r;let n=this.toJson(e,t);return JSON.stringify(n,null,null!==(r=null==t?void 0:t.prettySpaces)&&void 0!==r?r:0)}toBinary(e,t){let r=function(e){return e?Object.assign(Object.assign({},j),e):j}(t);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,t,r){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let n=null!=r?r:this.create();return this.refJsonReader.read(e,n,t),n}throw new Error(`Unable to parse message ${this.typeName} from JSON ${o(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,r){return this.refBinWriter.write(e,t,r),t}internalBinaryRead(e,t,r,n){let s=null!=n?n:this.create();return this.refBinReader.read(e,s,r,t),s}}{constructor(){super("Person",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:4,L:0},{no:3,name:"years",kind:"scalar",jsonName:"baz",T:5},{no:5,name:"picture",kind:"scalar",opt:!0,T:12},{no:6,name:"nickname",kind:"scalar",opt:!0,T:9}])}},_=require("readline");let z={name:"pete",id:123n,years:30};console.log(z);let H=q.toBinary(z);z=q.fromBinary(H),console.log(z),z=q.fromJsonString('{"name":"pete", "id":"123", "years": 30}'),console.log(z);const Q=_.createInterface({input:process.stdin,output:process.stdout});console.log('Some valid examples for json input:\n    {"name":"pete", "id":"123", "years": 30}\n    {"name":"pete", "id":"1234567891011121314", "years": 30, "picture": [255, 254, 253, 252]}\n    {"name":"pete", "id":"1234", "years": 90, "nickname": "P"}'),Q.on("close",(function(){console.log("\nBYE BYE !!!"),process.exit(0)})),function e(){Q.question("What kind of person do ypu want to create? ",(function(t){if(console.log(`Received '${t}'`),""===t)Q.close();else{const r=q.fromJsonString(t);console.log(r),e()}}))}()})();